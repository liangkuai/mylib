# 位运算


### 与运算（&）

- 判断奇偶：`(a & 1) == 0`

- 小写字母转大写：和 `'_'` （下划线符号）进行与运算

```c
// 'b' 的 ASCII 码是 0110 0010
// 'B' 的 ASCII 码是 0100 0010
//
// '_' 的 ASCII 码是 0101 1111，('b' & '_') 可以将第 6 位置 0

('b' & '_') = 'B'
('B' & '_') = 'B'
```

> **大小写字母的差别在于第 6 位，也就是大小写字母的 ASCII 码相差 32。**

- 消除数字 n 的二进制表示中的最后一个 1：`n & (n - 1)`

- `(a & b) << 1`：相当与两数相加的进位结果


### 或运算（|）

- 小于等于 n 的最大偶数：`(a | 1) - 1`

- 大写字母转小写：和 `' '` （空格符号）进行或运算

```c
// ' ' 的 ASCII 码是 0010 0000，('A' | ' ') 可以将第 6 位置 1

('A' | ' ') = 'a'
('a' | ' ') = 'a'
```


### 异或运算（^）

- `x ^ x = 0`：两个相同的数异或，结果为 0

- `0 ^ x = x`：0 与任何数异或，结果都为该数

- 字母大小写互转：和 `' '` （空格符号）进行异或运算

```c
('d' ^ ' ') = 'D'
('D' ^ ' ') = 'd'
```

- 异或运算相当与**无进位加法**

```
a = 5 = 0101
b = 4 = 0100

a ^ b 如下：

0 1 0 1
0 1 0 0
-------
0 0 0 1
```


- ~~交换两个数~~

``` c
int swap_nums(int *a, int *b)
{
    *a = *a ^ *b
    *b = *a ^ *b
    *a = *a ^ *b
}
```

> 不建议使用，参考：
> - [位运算有什么奇技淫巧？ - 赖明星的回答 - 知乎](https://www.zhihu.com/question/38206659/answer/132629024)
> - [利用异或方式交换两个变量值的原理是什么？ - 知乎](https://www.zhihu.com/question/62003033)


### 参考

- [常用的位操作 - labuladong - GitHub](https://github.com/labuladong/fucking-algorithm/blob/master/%E7%AE%97%E6%B3%95%E6%80%9D%E7%BB%B4%E7%B3%BB%E5%88%97/%E5%B8%B8%E7%94%A8%E7%9A%84%E4%BD%8D%E6%93%8D%E4%BD%9C.md)

- [位运算有什么奇技淫巧？ - 知乎](https://www.zhihu.com/question/38206659)


### 其他

斯坦福大学整理的位运算相关的技巧：[Bit Twiddling Hacks](https://graphics.stanford.edu/~seander/bithacks.html)